import{d as N,r as b,q as s,s as u,C as t,v as _,D as P,E as F,F as S,_ as z,o as j,G as q,H as X,I as Y,c as x,J as Z,K as r,t as m,L as K,M as B,N as h,O as ee,P as te,i as H,x as G,y as L,Q as O,R as W,S as oe,T as R,z as E,U as ne,V as U,m as se}from"./entry.d87b3aa5.js";import{u as J,a as le}from"./deleteMode.c2aa8ec8.js";const ue={class:"player-tab"},ae=N({__name:"PlayerTab",props:{player:{}},setup(i){const o=b(!1),l=b(),k=()=>{o.value=!0,setTimeout(()=>{l.value.focus()},100)};return(p,a)=>(s(),u("div",ue,[t(o)?P((s(),u("input",{key:1,ref_key:"input",ref:l,"onUpdate:modelValue":a[0]||(a[0]=v=>p.player.name=v),onFocusout:a[1]||(a[1]=()=>o.value=!1),onKeydown:a[2]||(a[2]=S(()=>o.value=!1,["enter"]))},null,544)),[[F,p.player.name]]):(s(),u("div",{key:0,class:"label",onClick:k},_(p.player.name),1))]))}});const re=z(ae,[["__scopeId","data-v-08fe81e0"]]);var Q=(i=>(i.desktop="desktop",i.tablet="tablet",i.mobile="mobile",i))(Q||{});const ie=()=>{const i=b("desktop"),o=k=>i.value==k,l=()=>{window.innerWidth>768?i.value="desktop":i.value=window.innerWidth>425?"tablet":"mobile"};return j(()=>{l(),window.addEventListener("resize",()=>l())}),o},de=["onClick"],ce=["onClick"],me=["onClick","onKeydown"],pe=["onClick"],ve=["value"],ye=["onClick"],_e=["onClick"],ke=["onKeydown"],Ie=["onClick"],Ce=N({__name:"CounterItem",props:{counterItem:{},counterItemIndex:{}},setup(i){const o=i,l=ie(),{getNextColor:k}=h(),{editCounterItem:p}=q(),a=X(),v=J(),{saveAsTemplate:M}=Y(),T=b(!1),y=b(!1),V=b(0),C=x(()=>a.value.includes(o.counterItemIndex)),$=b(),D=b(),d=()=>{if(new Date().getTime()-V.value>500&&!v.value)v.value=!0,a.value.push(o.counterItemIndex);else if(v.value)if(!C.value)a.value.push(o.counterItemIndex);else{const n=a.value.indexOf(o.counterItemIndex);a.value.splice(n,1),a.value.length==0&&(v.value=!1)}else o.counterItem.color=k(o.counterItem.color),p(o.counterItem,o.counterItemIndex),M()},c=()=>{T.value=!0,setTimeout(()=>{$.value.focus()},100)},f=()=>{y.value=!0,setTimeout(()=>{D.value.focus()},100)},w=()=>{T.value=!1,p(o.counterItem,o.counterItemIndex)},A=n=>{o.counterItem.value=n.target.valueAsNumber};return(n,e)=>{const g=Z("touch");return t(l)(("DEVICES"in n?n.DEVICES:t(Q)).desktop)?(s(),u("div",{key:0,class:K(["counter-item",{selected:t(C)&&t(v)}]),style:B({backgroundColor:n.counterItem.color}),onClick:r(d,["stop"]),onPointerdown:e[6]||(e[6]=()=>V.value=new Date().getTime())},[t(T)?P((s(),u("input",{key:1,ref_key:"input",ref:$,onClick:r(()=>null,["stop"]),"onUpdate:modelValue":e[0]||(e[0]=I=>n.counterItem.name=I),onFocusout:w,onKeydown:S(w,["enter"])},null,40,me)),[[F,n.counterItem.name]]):(s(),u("div",{key:0,class:"title",onClick:r(c,["stop"])},_(n.counterItem.name),9,ce)),m("div",{class:"minus",onClick:e[1]||(e[1]=r(I=>n.counterItem.value--,["stop"]))}," - "),t(y)?(s(),u("input",{key:3,ref_key:"inputValue",ref:D,type:"number",class:"value",onClick:e[2]||(e[2]=r(()=>{},["stop"])),value:n.counterItem.value,onInput:A,onFocusout:e[3]||(e[3]=()=>y.value=!1),onKeydown:e[4]||(e[4]=S(()=>y.value=!1,["enter"]))},null,40,ve)):(s(),u("div",{key:2,class:"value",onClick:r(f,["stop"])},_(n.counterItem.value),9,pe)),m("div",{class:"add",onClick:e[5]||(e[5]=r(I=>n.counterItem.value++,["stop"]))}," + ")],46,de)):P((s(),u("div",{key:1,class:K(["counter-item",{selected:t(C)&&t(v)}]),style:B({backgroundColor:n.counterItem.color}),onClick:r(d,["stop"]),onPointerdown:e[15]||(e[15]=()=>V.value=new Date().getTime())},[t(T)?P((s(),u("input",{key:1,ref_key:"input",ref:$,onClick:e[7]||(e[7]=r(()=>{},["stop"])),"onUpdate:modelValue":e[8]||(e[8]=I=>n.counterItem.name=I),onFocusout:w,onKeydown:S(w,["enter"])},null,40,ke)),[[F,n.counterItem.name]]):(s(),u("div",{key:0,class:"title",onClick:r(c,["stop"])},_(n.counterItem.name),9,_e)),m("div",{class:"minus",onClick:e[9]||(e[9]=r(I=>n.counterItem.value--,["stop"]))}," - "),t(y)?P((s(),u("input",{key:3,ref_key:"inputValue",ref:D,type:"number",class:"value",onClick:e[10]||(e[10]=r(()=>{},["stop"])),"onUpdate:modelValue":e[11]||(e[11]=I=>n.counterItem.value=I),onFocusout:e[12]||(e[12]=()=>y.value=!1),onKeydown:e[13]||(e[13]=S(()=>y.value=!1,["enter"]))},null,544)),[[F,n.counterItem.value]]):(s(),u("div",{key:2,class:"value",onClick:r(f,["stop"])},_(n.counterItem.value),9,Ie)),m("div",{class:"add",onClick:e[14]||(e[14]=r(I=>n.counterItem.value++,["stop"]))}," + ")],46,ye)),[[g,d,"longtap"]])}}});const fe=z(Ce,[["__scopeId","data-v-5b830767"]]),we={class:"counter-container"},be={class:"player-selector"},ge={class:"players-container"},Te={class:"counter-items-container"},Ve={class:"total"},$e=N({__name:"CounterContainer",setup(i){const o=ee(),l=te(),k=J(),{addCounterItem:p,selectedPlayer:a,deleteCounterItems:v}=q(),M=()=>{l.value>0&&l.value--},T=()=>{l.value<o.value.players.length-1&&l.value++},y=d=>d.counterItems.map(c=>c.value).reduce((c,f)=>c+f,0),V=x(()=>o.value.players.map(d=>y(d))),C=x(()=>V.value.reduce((d,c,f,w)=>c>w[d]?f:d,0)),$=x(()=>o.value.players[C.value].name),D=x(()=>V.value[C.value]);return(d,c)=>{const f=re,w=H("Slide"),A=H("Carousel"),n=fe;return s(),u("div",we,[m("div",be,[G(A,{itemsToShow:1,wrapAround:!1,transition:500,modelValue:t(l),"onUpdate:modelValue":c[0]||(c[0]=e=>oe(l)?l.value=e:null)},{default:L(()=>[(s(!0),u(O,null,W(t(o).players,(e,g)=>(s(),U(w,{key:"slide_player_"+g},{default:L(()=>[m("div",ge,[m("div",{class:"prev",onClick:M},_(t(l)>0?"<":""),1),(s(),U(f,{player:e,key:"player_"+g},null,8,["player"])),m("div",{class:"next",onClick:T},_(t(l)<t(o).players.length-1?">":""),1)])]),_:2},1024))),128))]),_:1},8,["modelValue"])]),m("div",Te,[(s(!0),u(O,null,W(t(a).counterItems,(e,g)=>(s(),U(n,{counterItem:e,key:"counterItem_"+g,counterItemIndex:g},null,8,["counterItem","counterItemIndex"]))),128))]),m("div",{class:K(["add-counter",{delete:t(k)}]),onClick:c[1]||(c[1]=()=>{t(k)?t(v)():t(p)()})},null,2),m("div",Ve," Totale: "+_(y(t(a))),1),t(o).players.length>1?(s(),u("div",{key:0,class:K(["winner",{you:t(l)==t(C)}])},[t(l)==t(C)?R(d.$slots,"default",{key:0},()=>[E(" Sei il vincitore ")],!0):R(d.$slots,"default",{key:1},()=>[E(" Il vincitore Ã¨ "),m("b",null,_(t($)),1),E(" col punteggio di "),m("b",null,_(t(D)),1)],!0)],2)):ne("",!0)])}}});const De=z($e,[["__scopeId","data-v-716142ab"]]),Pe={class:"content"},Fe=N({__name:"index",setup(i){se({title:"Custom Counter"});const{disableDeleteMode:o}=le();return(l,k)=>{const p=De;return s(),u("div",Pe,[G(p,{onClick:t(o)},null,8,["onClick"])])}}});export{Fe as default};
