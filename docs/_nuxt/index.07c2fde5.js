import{d as x,r as b,q as s,s as u,C as t,v as p,D as S,E as F,F as D,_ as z,o as Q,G as W,H as j,I as X,c as K,J as Y,K as m,t as a,L as P,M as h,N as Z,O as ee,P as te,i as H,x as R,y as L,Q as N,R as E,S as oe,T as O,z as U,U as ne,V as B,A as se,B as le,m as ae}from"./entry.a930c989.js";import{u as q,a as ue}from"./deleteMode.88f58ef0.js";const re={class:"player-tab"},ie=x({__name:"PlayerTab",props:{player:{}},setup(r){const n=b(!1),l=b(),I=()=>{n.value=!0,setTimeout(()=>{l.value.focus()},100)};return(v,i)=>(s(),u("div",re,[t(n)?S((s(),u("input",{key:1,ref_key:"input",ref:l,"onUpdate:modelValue":i[0]||(i[0]=_=>v.player.name=_),onFocusout:i[1]||(i[1]=()=>n.value=!1),onKeydown:i[2]||(i[2]=D(()=>n.value=!1,["enter"]))},null,544)),[[F,v.player.name]]):(s(),u("div",{key:0,class:"label",onClick:I},p(v.player.name),1))]))}});const ce=z(ie,[["__scopeId","data-v-08fe81e0"]]);var G=(r=>(r.desktop="desktop",r.tablet="tablet",r.mobile="mobile",r))(G||{});const de=()=>{const r=b("desktop"),n=I=>r.value==I,l=()=>{window.innerWidth>768?r.value="desktop":r.value=window.innerWidth>425?"tablet":"mobile"};return Q(()=>{l(),window.addEventListener("resize",()=>l())}),n},me=["onClick"],pe=["onClick"],ve=["onClick","onKeydown"],_e=["onClick"],ye=["value"],Ie=["onClick"],ke=["onClick"],Ce=["onKeydown"],fe=["onClick"],we=x({__name:"CounterItem",props:{counterItem:{},counterItemIndex:{}},setup(r){const n=r,l=de(),{getNextColor:I}=Z(),{editCounterItem:v}=W(),i=j(),_=q(),{saveAsTemplate:M}=X(),g=b(!1),y=b(!1),C=b(0),V=K(()=>i.value.includes(n.counterItemIndex)),f=b(),c=b(),d=()=>{if(new Date().getTime()-C.value>500&&!_.value)_.value=!0,i.value.push(n.counterItemIndex);else if(_.value)if(!V.value)i.value.push(n.counterItemIndex);else{const o=i.value.indexOf(n.counterItemIndex);i.value.splice(o,1),i.value.length==0&&(_.value=!1)}else n.counterItem.color=I(n.counterItem.color),v(n.counterItem,n.counterItemIndex),M()},w=()=>{g.value=!0,setTimeout(()=>{f.value.focus()},100)},T=()=>{y.value=!0,setTimeout(()=>{c.value.focus()},100)},$=()=>{g.value=!1,v(n.counterItem,n.counterItemIndex)},A=o=>{n.counterItem.value=o.target.valueAsNumber};return(o,e)=>{const J=Y("touch");return t(l)(("DEVICES"in o?o.DEVICES:t(G)).desktop)?(s(),u("div",{key:0,class:P(["counter-item",{selected:t(V)&&t(_)}]),style:h({backgroundColor:o.counterItem.color}),onClick:m(d,["stop"]),onPointerdown:e[6]||(e[6]=()=>C.value=new Date().getTime())},[t(g)?S((s(),u("input",{key:1,ref_key:"input",ref:f,onClick:m(()=>null,["stop"]),"onUpdate:modelValue":e[0]||(e[0]=k=>o.counterItem.name=k),onFocusout:$,onKeydown:D($,["enter"])},null,40,ve)),[[F,o.counterItem.name]]):(s(),u("div",{key:0,class:"title",onClick:m(w,["stop"])},p(o.counterItem.name),9,pe)),a("div",{class:"minus",onClick:e[1]||(e[1]=m(k=>o.counterItem.value--,["stop"]))}," - "),t(y)?(s(),u("input",{key:3,ref_key:"inputValue",ref:c,type:"number",class:"value",onClick:e[2]||(e[2]=m(()=>{},["stop"])),value:o.counterItem.value,onInput:A,onFocusout:e[3]||(e[3]=()=>y.value=!1),onKeydown:e[4]||(e[4]=D(()=>y.value=!1,["enter"]))},null,40,ye)):(s(),u("div",{key:2,class:"value",onClick:m(T,["stop"])},p(o.counterItem.value),9,_e)),a("div",{class:"add",onClick:e[5]||(e[5]=m(k=>o.counterItem.value++,["stop"]))}," + ")],46,me)):S((s(),u("div",{key:1,class:P(["counter-item",{selected:t(V)&&t(_)}]),style:h({backgroundColor:o.counterItem.color}),onClick:m(d,["stop"]),onPointerdown:e[15]||(e[15]=()=>C.value=new Date().getTime())},[t(g)?S((s(),u("input",{key:1,ref_key:"input",ref:f,onClick:e[7]||(e[7]=m(()=>{},["stop"])),"onUpdate:modelValue":e[8]||(e[8]=k=>o.counterItem.name=k),onFocusout:$,onKeydown:D($,["enter"])},null,40,Ce)),[[F,o.counterItem.name]]):(s(),u("div",{key:0,class:"title",onClick:m(w,["stop"])},p(o.counterItem.name),9,ke)),a("div",{class:"minus",onClick:e[9]||(e[9]=m(k=>o.counterItem.value--,["stop"]))}," - "),t(y)?S((s(),u("input",{key:3,ref_key:"inputValue",ref:c,type:"number",class:"value",onClick:e[10]||(e[10]=m(()=>{},["stop"])),"onUpdate:modelValue":e[11]||(e[11]=k=>o.counterItem.value=k),onFocusout:e[12]||(e[12]=()=>y.value=!1),onKeydown:e[13]||(e[13]=D(()=>y.value=!1,["enter"]))},null,544)),[[F,o.counterItem.value]]):(s(),u("div",{key:2,class:"value",onClick:m(T,["stop"])},p(o.counterItem.value),9,fe)),a("div",{class:"add",onClick:e[14]||(e[14]=m(k=>o.counterItem.value++,["stop"]))}," + ")],46,Ie)),[[J,d,"longtap"]])}}});const be=z(we,[["__scopeId","data-v-5b830767"]]),ge=r=>(se("data-v-78cb3f75"),r=r(),le(),r),Te={class:"counter-container"},$e={class:"player-selector"},Ve={class:"players-container"},Se={class:"counter-items-container"},De={class:"total"},Pe={class:"score"},Ne=ge(()=>a("div",{class:"row header"},[a("div",{class:"column"}," Player "),a("div",{class:"column"}," Score ")],-1)),Fe={class:"column"},Ke={class:"column"},xe=x({__name:"CounterContainer",setup(r){const n=ee(),l=te(),I=q(),{addCounterItem:v,selectedPlayer:i,deleteCounterItems:_}=W(),M=()=>{l.value>0&&l.value--},g=()=>{l.value<n.value.players.length-1&&l.value++},y=c=>c.counterItems.map(d=>d.value).reduce((d,w)=>d+w,0),C=K(()=>n.value.players.map(c=>({playerName:c.name,total:y(c)}))),V=K(()=>C.value.sort((c,d)=>d.total-c.total)),f=K(()=>C.value.reduce((c,d,w,T)=>d.total>T[c].total?w:c,0));return(c,d)=>{const w=ce,T=H("Slide"),$=H("Carousel"),A=be;return s(),u("div",Te,[a("div",$e,[R($,{itemsToShow:1,wrapAround:!1,transition:500,modelValue:t(l),"onUpdate:modelValue":d[0]||(d[0]=o=>oe(l)?l.value=o:null)},{default:L(()=>[(s(!0),u(N,null,E(t(n).players,(o,e)=>(s(),B(T,{key:"slide_player_"+e},{default:L(()=>[a("div",Ve,[a("div",{class:"prev",onClick:M},p(t(l)>0?"<":""),1),(s(),B(w,{player:o,key:"player_"+e},null,8,["player"])),a("div",{class:"next",onClick:g},p(t(l)<t(n).players.length-1?">":""),1)])]),_:2},1024))),128))]),_:1},8,["modelValue"])]),a("div",Se,[(s(!0),u(N,null,E(t(i).counterItems,(o,e)=>(s(),B(A,{counterItem:o,key:"counterItem_"+e,counterItemIndex:e},null,8,["counterItem","counterItemIndex"]))),128))]),a("div",{class:P(["add-counter",{delete:t(I)}]),onClick:d[1]||(d[1]=()=>{t(I)?t(_)():t(v)()})},null,2),a("div",De," Totale: "+p(y(t(i))),1),t(n).players.length>1?(s(),u(N,{key:0},[a("div",{class:P(["winner",{you:t(l)==t(f)}])},[t(l)==t(f)?O(c.$slots,"default",{key:0},()=>[U(" Sei il vincitore ")],!0):O(c.$slots,"default",{key:1},()=>[U(" Il vincitore Ã¨ "),a("b",null,p(t(C)[t(f)].playerName),1),U(" col punteggio di "),a("b",null,p(t(C)[t(f)].total),1)],!0)],2),a("div",Pe,[Ne,(s(!0),u(N,null,E(t(V),(o,e)=>(s(),u("div",{class:P(["row",{winner:e==0}])},[a("div",Fe,p(o.playerName),1),a("div",Ke,p(o.total),1)],2))),256))])],64)):ne("",!0)])}}});const Me=z(xe,[["__scopeId","data-v-78cb3f75"]]),Ae={class:"content"},Be=x({__name:"index",setup(r){ae({title:"Custom Counter"});const{disableDeleteMode:n}=ue();return(l,I)=>{const v=Me;return s(),u("div",Ae,[R(v,{onClick:t(n)},null,8,["onClick"])])}}});export{Be as default};
